!function(){"use strict";angular.module("nvd3",[]).directive("nvd3",[function(){return{restrict:"AE",scope:{data:"=",options:"="},link:function(scope,element){function updateWithOptions(options){clearElement(),chart=getChart(options.chart.type),angular.forEach(chart,function(value,key){["options","multibar","discretebar","pie","scatter","bullet","sparkline"].indexOf(key)>=0||("dispatch"===key?configureEvents(chart[key],options.chart[key]):["lines","lines2","bars","bars2","legend","distX","distY","xAxis","x2Axis","yAxis","y1Axis","y2Axis","y3Axis","y4Axis","interactiveLayer","controls"].indexOf(key)>=0?configure(chart[key],options.chart[key]):"clipEdge"===key&&"multiBarHorizontalChart"===options.chart.type||"clipVoronoi"===key&&"historicalBarChart"===options.chart.type||"color"===key&&"indentedTreeChart"===options.chart.type||"defined"===key&&("historicalBarChart"===options.chart.type||"cumulativeLineChart"===options.chart.type)||"forceX"===key&&("multiBarChart"===options.chart.type||"discreteBarChart"===options.chart.type||"multiBarHorizontalChart"===options.chart.type)||"interpolate"===key&&"historicalBarChart"===options.chart.type||"isArea"===key&&"historicalBarChart"===options.chart.type||"size"===key&&"historicalBarChart"===options.chart.type||"stacked"===key&&"stackedAreaChart"===options.chart.type||"values"===key&&"pieChart"===options.chart.type||"xScale"===key&&"scatterChart"===options.chart.type||"yScale"===key&&"scatterChart"===options.chart.type||"x"===key&&"lineWithFocusChart"===options.chart.type||"y"===key&&"lineWithFocusChart"===options.chart.type||(void 0===options.chart[key]||null===options.chart[key]?options.chart[key]=value():chart[key](options.chart[key])))}),svg=d3.select(element[0]).append("svg").attr("height",options.chart.height).attr("width",options.chart.width),updateWithData(scope.data),configureWrapper("title"),configureWrapper("subtitle"),configureWrapper("caption"),configureStyles(),nv.addGraph(function(){return nv.utils.windowResize(function(){chart.update()}),chart})}function updateWithData(data){data&&svg&&(scope.options.chart.transitionDuration=+scope.options.chart.transitionDuration||250,svg.datum(data).transition().duration(scope.options.chart.transitionDuration).call(chart))}function clearElement(){element.parent().find(".title").remove(),element.parent().find(".subtitle").remove(),element.parent().find(".caption").remove(),element.empty()}function getChart(type){switch(type){case"bulletChart":return nv.models.bulletChart();case"cumulativeLineChart":return nv.models.cumulativeLineChart();case"discreteBarChart":return nv.models.discreteBarChart();case"stackedAreaChart":return nv.models.stackedAreaChart();case"multiBarChart":return nv.models.multiBarChart();case"historicalBarChart":return nv.models.historicalBarChart();case"multiBarHorizontalChart":return nv.models.multiBarHorizontalChart();case"pieChart":return nv.models.pieChart();case"scatterChart":return nv.models.scatterChart();case"scatterPlusLineChart":return nv.models.scatterPlusLineChart();case"lineChart":return nv.models.lineChart();case"linePlusBarChart":return nv.models.linePlusBarChart();case"lineWithFocusChart":return nv.models.lineWithFocusChart();case"linePlusBarWithFocusChart":return nv.models.linePlusBarWithFocusChart();case"sparklinePlus":return nv.models.sparklinePlus();case"indentedTreeChart":return nv.models.indentedTree()}}function configure(chart,options){chart&&(void 0===options&&(options={}),angular.forEach(chart,function(value,key){"dispatch"===key?configureEvents(value,options[key]):["scatter","defined","options","axis","rangeBand","rangeBands"].indexOf(key)<0&&(void 0===options[key]||null===options[key]?options[key]=value():chart[key](options[key]))}))}function configureEvents(dispatch,options){dispatch&&(void 0===options&&(options={}),angular.forEach(dispatch,function(value,key){void 0===options[key]||null===options[key]?options[key]=value.on:dispatch.on(key+"._",options[key])}))}function configureWrapper(name){scope.options[name]=scope.options[name]||{},angular.forEach(defaultWrapper(name),function(value,key){(void 0===scope.options[name][key]||null===scope.options[name][key])&&(scope.options[name][key]=value)});var wrapElement=angular.element("<div></div>").addClass(name).addClass(scope.options[name].class).removeAttr("style").css(scope.options[name].css).text(scope.options[name].text);scope.options[name].enable&&("title"===name?element.parent().prepend(wrapElement):"subtitle"===name?element.parent().find(".title").after(wrapElement):"caption"===name&&element.parent().append(wrapElement))}function configureStyles(){scope.options.styles=scope.options.styles||{},angular.forEach(defaultStyles(),function(value,key){(void 0===scope.options.styles[key]||null===scope.options.styles[key])&&(scope.options.styles[key]=value)}),angular.forEach(scope.options.styles.classes,function(value,key){value?element.addClass(key):element.removeClass(key)}),element.removeAttr("style").css(scope.options.styles.css)}function defaultWrapper(_){switch(_){case"title":return{enable:!1,text:"Write Your Title","class":"h4",css:{width:scope.options.chart.width+"px",textAlign:"center"}};case"subtitle":return{enable:!1,text:"Write Your Subtitle",css:{width:scope.options.chart.width+"px",textAlign:"center"}};case"caption":return{enable:!1,text:"Figure 1. Write Your Caption text.",css:{width:scope.options.chart.width+"px",textAlign:"center"}}}}function defaultStyles(){return{classes:{"with-3d-shadow":!0,"with-transitions":!0,gallery:!1},css:{}}}var chart,svg;scope.$watch("options",function(options){updateWithOptions(options)},!0),scope.$watch("data",function(data){updateWithData(data)},!0)}}}])}();